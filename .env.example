# Example environment variable file for MailJaeger
# Copy this file to .env and configure with your settings

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================

# API Authentication Key (REQUIRED for production)
# Multiple keys: comma-separated values for key rotation support
# Generate with: python -c 'import secrets; print(secrets.token_urlsafe(32))'
# Leave empty to disable authentication (NOT RECOMMENDED for production)
API_KEY=

# API Key File (alternative to API_KEY environment variable)
# Path to file containing API keys (one per line, lines starting with # are ignored)
# Example: /run/secrets/mailjaeger_api_keys
API_KEY_FILE=

# Reverse Proxy Configuration
# Set to true if running behind a trusted reverse proxy (Nginx, Caddy, Traefik)
# When true, honors X-Forwarded-For and X-Forwarded-Proto headers
# WARNING: Only enable if your reverse proxy is properly configured to set these headers
TRUST_PROXY=false

# Trusted Proxy IPs (comma-separated)
# When TRUST_PROXY=true, only trust X-Forwarded-* headers from these IPs
# Leave empty to trust all proxies (use with caution)
# Example: 127.0.0.1,10.0.0.1
TRUSTED_PROXY_IPS=

# ============================================================================
# APPROVAL WORKFLOW
# ============================================================================

# Require manual approval before executing IMAP changes (moves, deletions)
# When enabled, all IMAP actions are queued as PendingActions requiring approval
# Use the dashboard "Pending Actions" tab to review and approve/reject
REQUIRE_APPROVAL=false

# ============================================================================
# DATA RETENTION SETTINGS
# ============================================================================

# Days to retain processed emails (0 = keep forever)
# Emails older than this will be deleted during daily purge (03:30 local time)
RETENTION_DAYS_EMAILS=0

# Days to retain completed/rejected pending actions (0 = keep forever)
# Actions with status APPLIED, REJECTED, or FAILED older than this will be deleted
# Note: PENDING and APPROVED actions are never auto-deleted
RETENTION_DAYS_ACTIONS=0

# Days to retain audit logs (0 = keep forever)
# Audit logs older than this will be deleted during daily purge
RETENTION_DAYS_AUDIT=0

# Server Configuration
# Use 127.0.0.1 (localhost only) for local deployment
# Use 0.0.0.0 to expose externally (REQUIRES API_KEY for security)
SERVER_HOST=127.0.0.1
SERVER_PORT=8000

# CORS Configuration
# Comma-separated list of allowed origins for CORS
# Default: localhost only (secure default)
CORS_ORIGINS=http://localhost:8000,http://127.0.0.1:8000

# ============================================================================
# IMAP CONFIGURATION
# ============================================================================

IMAP_HOST=imap.gmail.com
IMAP_PORT=993
IMAP_USERNAME=your_email@gmail.com
IMAP_PASSWORD=your_app_password

# For Gmail: Create an App Password at https://myaccount.google.com/apppasswords
# For Outlook/Office365: Use your account password or app password
# SECURITY: Never commit real credentials to version control

# ============================================================================
# AI CONFIGURATION (Ollama)
# ============================================================================

# Ollama endpoint (local by default)
AI_ENDPOINT=http://localhost:11434

# AI Model - Recommended models for Raspberry Pi 5 (16GB RAM):
#   - mistral:7b-instruct-q4_0 (~4GB, best quality/performance balance)
#   - phi3:mini (~2-3GB, most efficient)
#   - llama3.2:3b (~2-3GB, good alternative)
AI_MODEL=mistral:7b-instruct-q4_0
AI_TIMEOUT=120

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# SQLite database path (automatically created in data directory)
DATABASE_URL=sqlite:///./data/mailjaeger.db

# ============================================================================
# EMAIL PROCESSING CONFIGURATION
# ============================================================================

# Spam detection threshold (0.0-1.0)
SPAM_THRESHOLD=0.7

# Maximum emails to process per run
MAX_EMAILS_PER_RUN=200

# ============================================================================
# MAIL ACTION SAFETY CONTROLS
# ============================================================================

# Safe Mode: When enabled, performs analysis but NO destructive IMAP actions
# Recommended: true for first-time setup, false after testing
SAFE_MODE=true

# Mark processed emails as read (false = keeps them unread)
MARK_AS_READ=false

# Delete spam emails (false = moves to quarantine folder instead)
# CAUTION: Deletion may be irreversible depending on mail server
DELETE_SPAM=false

# Quarantine folder for suspected spam (used when DELETE_SPAM=false)
QUARANTINE_FOLDER=Quarantine

# ============================================================================
# FOLDER CONFIGURATION
# ============================================================================

INBOX_FOLDER=INBOX
ARCHIVE_FOLDER=Archive
SPAM_FOLDER=Spam

# ============================================================================
# SCHEDULING CONFIGURATION
# ============================================================================

# Daily processing time (HH:MM format, 24-hour)
SCHEDULE_TIME=08:00

# Timezone for scheduling
SCHEDULE_TIMEZONE=Europe/Berlin

# ============================================================================
# LEARNING SYSTEM
# ============================================================================

# Enable learning from user behavior
LEARNING_ENABLED=true

# Confidence threshold for automated folder routing (0.0-1.0)
LEARNING_CONFIDENCE_THRESHOLD=0.8

# ============================================================================
# STORAGE & PRIVACY CONFIGURATION
# ============================================================================

# Store full email body in database
# PRIVACY WARNING: Disabled by default for data minimization
# Enable only if you need full-text search on email content
STORE_EMAIL_BODY=false

# Store email attachments
# CAUTION: May consume significant disk space
STORE_ATTACHMENTS=false

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log file path (automatically created in data/logs directory)
LOG_FILE=./data/logs/mailjaeger.log

# Debug Mode: Enables verbose logging and detailed error messages
# WARNING: May expose sensitive information - use only for development
DEBUG=false
